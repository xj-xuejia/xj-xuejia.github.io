<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-VUE" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/01/VUE/" class="article-date">
  <time class="dt-published" datetime="2021-07-01T07:14:14.531Z" itemprop="datePublished">2021-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="VUE实现请求转发"><a href="#VUE实现请求转发" class="headerlink" title="VUE实现请求转发"></a>VUE实现请求转发</h2><p>场景：当使用接口请求数据的时候，由于端口号不一致而导致发生跨域错误。</p>
<p>解决：生成<code>vue.config.js</code>文件，在里边添加配置项。</p>
<p>详情：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">model.exports = &#123;</span><br><span class="line">  <span class="attr">devServer</span>:&#123;</span><br><span class="line">  	<span class="attr">proxy</span>:&#123;</span><br><span class="line">     <span class="string">&#x27;api&#x27;</span>:&#123;</span><br><span class="line">        <span class="attr">targert</span>:<span class="string">&#x27;http://localhost:3000&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//紧接着重启项目</span></span><br></pre></td></tr></table></figure>

<p>原理：其内部端口号依然是不一致的。但是我们去请求时，<code>devServer</code> 会自动将请求转到3000接口。</p>
<h2 id="VUE组件懒加载"><a href="#VUE组件懒加载" class="headerlink" title="VUE组件懒加载"></a>VUE组件懒加载</h2><p>场景：使用工厂函数，将子组件设置懒加载</p>
<p>解决：这个问题的作用使我们可以提升页面的加载速度，优化组件性能</p>
<p>详情：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ErrorComponent <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>; <span class="comment">//显示加载错误的组件</span></span><br><span class="line"><span class="keyword">import</span> LodingComponent <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>; <span class="comment">//显示加载中的组件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//需要懒加载的子组件</span></span><br><span class="line"><span class="keyword">const</span> AsyncList = <span class="function">()=&gt;</span>(&#123;</span><br><span class="line">    <span class="attr">component</span>:<span class="keyword">import</span>(<span class="comment">/*webpackChunkName:&quot;AsyncList&quot;*/</span><span class="string">&#x27;path&#x27;</span>),引入路径</span><br><span class="line">    <span class="attr">loading</span>: LodingComponent,显示加载中的文件</span><br><span class="line">    <span class="attr">error</span>:ErrorComponent,显示加载错误的文件</span><br><span class="line">    <span class="attr">delay</span>:<span class="number">200</span>,延迟<span class="number">200</span>毫秒加载</span><br><span class="line">    <span class="attr">timeout</span>:<span class="number">3000</span>,超过<span class="number">3000</span>毫秒调用错误文件</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  <span class="attr">components</span>:&#123;</span><br><span class="line">   AsyncList<span class="comment">//子组件</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原理：定制异步组件。</p>
<h2 id="VUE动态组件的使用"><a href="#VUE动态组件的使用" class="headerlink" title="VUE动态组件的使用"></a>VUE动态组件的使用</h2><p>场景：例如新闻列表组件，我们封装组件时，可能结构和展示效果每次都不通，动态组件相对于写死的更容易维护和使用。（模拟新闻列表 同时可能有 text video image）</p>
<p>解决：利用<code>&lt;component&gt;&lt;/component&gt;</code>标签</p>
<p>详情：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">1.生成模拟要用在组件的数据 new.js: </span><br><span class="line">export default[</span><br><span class="line">  &#123;</span><br><span class="line">   id:1，</span><br><span class="line">   type:&#x27;text&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">   id:2，</span><br><span class="line">   type:&#x27;image&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">   id:3，</span><br><span class="line">   type:&#x27;video&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">   id:4，</span><br><span class="line">   type:&#x27;text&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line">2.组件模拟请求（用导入js文件的方式将数据传输到组件中）import newsData from &#x27;文件路径&#x27;</span><br><span class="line">3.组件中data创建类型存储js的数据 newsData</span><br><span class="line">4.同时具备三个子组件：newsImage\newsText\newsVideo</span><br><span class="line">5.将3个子组件引入父组件</span><br><span class="line">6.vue提供的有一个&quot;<span class="tag">&lt;<span class="name">component</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span>&quot;标签，是专门服务动态组件的</span><br><span class="line">7.绑定“:is”“<span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;newsImageName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span>” 组件中data return创建一个	newsImageName:&quot;newsImage&quot;</span><br><span class="line">8.在计算属性中添加加工记录数据属性的函数 newsCompType</span><br><span class="line">computed:&#123;</span><br><span class="line">  newsCompType()&#123;</span><br><span class="line">	return this.newsData.map(item=&gt;&#123;</span><br><span class="line">      return&#123;</span><br><span class="line">        ...item,</span><br><span class="line">		type:&#x27;news-&#x27;+item.type</span><br><span class="line">	  &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">9.渲染数据：(利用循环，加载组件的内容)</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in newsCompType&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;item.type&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">    /*可以理解component是引入的所有的组件的一个集合*/</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>原理：将先组件统一引入，通过计算属性调整组件的标识，v-for遍历所有的标识，利用<code>&lt;component :is=&quot;type&quot;&gt;&lt;/component&gt;</code>标签动态渲染组件。</p>
<h2 id="VUE中的样式穿透"><a href="#VUE中的样式穿透" class="headerlink" title="VUE中的样式穿透"></a>VUE中的样式穿透</h2><p>场景：想要更改某个外部插件的内部样式（<code>wiper.js</code>）外部插件的样式，通常是在我们自定义样式之后加载进来，这就导致我们的样式被后来的覆盖掉。</p>
<p>解决：利用   <code>&gt;&gt;&gt;</code>  来写 选择器</p>
<p>详情：前提要有  <code>scoped</code>  修饰  <code>style</code>  标签</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &gt;&gt;&gt; <span class="selector-class">.swiper-padination-bullet-active</span>&#123;<span class="attribute">background</span>:red&#125;</span><br></pre></td></tr></table></figure>

<p>原理：加了  <code>scoped</code>  以后   <code>&gt;&gt;&gt;</code>  的优先级会大于后者插件的自带样式,请不要强制的增加选择器的优先级。</p>
<h2 id="VUE根据路由记录实现动态面包屑内容"><a href="#VUE根据路由记录实现动态面包屑内容" class="headerlink" title="VUE根据路由记录实现动态面包屑内容"></a>VUE根据路由记录实现动态面包屑内容</h2><p>场景：以<code>Element-ui</code>的面包屑组件为例，实现动态面包屑</p>
<p>解决：组件挂载结束后查看this.$route获取路由信息</p>
<p>详情：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">1.打印this.$route查看mathed数组，包含了当前路径的路由记录匹配的内容。</span><br><span class="line"></span><br><span class="line">2.路由记录？</span><br><span class="line">比如现在首页是一级导航，其首页下方还有多个子级页面，那么这个整个首页包括一级二级....等所有路由对象就称之为路由记录。可以称作（路由集合）。</span><br><span class="line"></span><br><span class="line">3.在路由记录中加入meta:&#123;title:&quot;子级名称&quot;&#125;(元数据)</span><br><span class="line"></span><br><span class="line">4.当展开mathed数组后，可以找到相对应路由记录下的路径(path)和元数据(meta)</span><br><span class="line"></span><br><span class="line">5.利用计算属性computed获取打开组件后的路由记录</span><br><span class="line"></span><br><span class="line">6.通过循环mathed数组，得到一组动态的面包屑</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">el-breadcrumb</span> <span class="attr">separator</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-breadcrumb-item</span> <span class="attr">v-for</span>=<span class="string">&quot;item in breadCrumbList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.path&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;item.meta.title&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-breadcrumb</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>:&#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">breadCrumbList</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="built_in">this</span>.$route.mathed;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>原理：利用计算属性获取到路由跳转携带的<code>mathed</code>来获取路由记录，在面包屑组件中循环<code>mathed</code>得到的路由记录展示到面包屑组件中。</p>
<h2 id="科里化封装Axios的GET请求"><a href="#科里化封装Axios的GET请求" class="headerlink" title="科里化封装Axios的GET请求"></a>科里化封装Axios的GET请求</h2><p>场景：封装<code>axios</code>的<code>get</code>请求</p>
<p>解决：封装<code>axios</code>的<code>get</code>请求</p>
<p>详情：1.生成<code>request.js</code>文件；2.生成<code>index.js</code>文件；3.index.vue</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ERR_OK = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数科里化写法</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">params</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> axios.get(url,&#123;</span><br><span class="line">      params</span><br><span class="line">    &#125;)</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;errCode, data&#125; = res.data  <span class="comment">//errCode是res返回数据中有一个错误码</span></span><br><span class="line">        <span class="keyword">if</span>(errCode === ERR_OK)&#123;</span><br><span class="line">          <span class="keyword">return</span> data <span class="comment">//如果errCode为0则代表成功</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; get &#125; <span class="keyword">from</span> <span class="string">&#x27;./request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//当get()调用时，常量会接收到get方法返回的函数，这个函数需要传递一个请求参数</span></span><br><span class="line"><span class="keyword">const</span> getBlogList = get(<span class="string">&#x27;api/nblog/id&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> getBlogDetail = get(<span class="string">&#x27;api/nblog/detail&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span>&#123;</span><br><span class="line">  getBlogList,</span><br><span class="line">  getBlogDetail</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123; getBlogList, getBlogDetail &#125; from &#x27;api&#x27;,</span><br><span class="line">  export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">      return&#123;</span><br><span class="line">        result&#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted()&#123;&#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      //getBlogList是一个不需要传参数的get请求</span><br><span class="line">      getBlogList()&#123;</span><br><span class="line">        getBlogList().then(res=&gt;&#123;</span><br><span class="line">          this.result = res</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;，</span><br><span class="line">      //getBlogDetail需要传递参数</span><br><span class="line">      getBlogDetail(id)&#123;</span><br><span class="line">        getBlogDetail(&#123;</span><br><span class="line">          //id对象的参数名和属性名一致，&#x27;id:id&#x27;可以简写</span><br><span class="line">          id</span><br><span class="line">        &#125;).then(res =&gt; &#123;</span><br><span class="line">            console.log(res)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>原理：在<code>result.js</code>中用科里化的形式：先将请求的外部函数写好，内部返回一个函数用于接收<code>get</code>请求的参数，接着将请求到的<code>res</code>再返回出去。于是生成<code>index.js</code>去接收<code>result.js</code>中<code>get</code>请求返回的<code>data</code>。在<code>index.vue</code>中通过调用<code>index.js</code>的请求方法<code>getBlogList()</code>和<code>getBlogDetail(id)</code>来根据业务需要获取数据，传值和不传值，全看<code>index.js</code>怎样去写。</p>
<h2 id="VUEX实现状态持久化"><a href="#VUEX实现状态持久化" class="headerlink" title="VUEX实现状态持久化"></a>VUEX实现状态持久化</h2><p>场景：<code>vuex &gt; index.js</code></p>
<p>解决：<code>VUEX</code>实现状态持久化 </p>
<p>详情：<code>vuex &gt; index.js</code> | <code>main.js</code> | <code>App.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//存数据</span></span><br><span class="line"><span class="attr">state</span>:&#123;</span><br><span class="line">  <span class="attr">isPlayed</span>:<span class="literal">false</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//数据处理</span></span><br><span class="line"><span class="attr">mutations</span>:&#123;</span><br><span class="line">	<span class="function"><span class="title">markVideoPlayed</span>(<span class="params">state</span>)</span>&#123;</span><br><span class="line">  	state.isPlayed = <span class="literal">true</span></span><br><span class="line">    <span class="comment">//这里如果单独只处理改变为true的话，浏览器刷新就会恢复到初始值，所以我们需要。。。</span></span><br><span class="line">    <span class="comment">//设置storage</span></span><br><span class="line">    <span class="built_in">window</span>.localeStorage.isPlayed = <span class="built_in">JSON</span>.stringfly(<span class="literal">true</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">setPlayStatus</span>(<span class="params">state,status</span>)</span>&#123;</span><br><span class="line">   state.isPlayed = status</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//请求方法</span></span><br><span class="line"><span class="attr">actions</span>:&#123;</span><br><span class="line">  <span class="comment">//commit是从loadVideoStatus的众多参数对象中结构出来的某个属性</span></span><br><span class="line">  <span class="function"><span class="title">loadVideoStatus</span>(<span class="params"> &#123;commit&#125; </span>)</span>&#123;</span><br><span class="line">  	<span class="comment">//发送播放请求。。。</span></span><br><span class="line">    <span class="keyword">let</span> videoStatus = <span class="built_in">JSON</span>.parse(<span class="built_in">window</span>.localeStorage.isPlayed);</span><br><span class="line">    <span class="comment">//提交</span></span><br><span class="line">    commit (<span class="string">&#x27;setPlayStatus&#x27;</span>,videoStatus)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(app),</span><br><span class="line">  store</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>播放状态：&#123;&#123; $store.state.isPlayed &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;onClick&quot;</span>&gt;</span>点击播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">  <span class="function"><span class="title">onClick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//通过提交markVideoPlayed来更改state</span></span><br><span class="line">    <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;markVideoPlayed&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//请求actions中的loadVideoStatus</span></span><br><span class="line">	<span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;loadVideoStatus&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原理：<code>VUX state</code>默认无法持久化，如果页面刷新则会回到<code>state</code>的初始状态，可以参照<code>storage</code>的原理去想这件事。我们需要保证，在<code>vuex</code>中，提交的<code>state</code>和提交的<code>storage</code>在同一个<code>mutations</code>函数中同步处理，保证用户在更改状态时，<code>storage</code>和<code>state</code>能同时更新，当用户刷新页面时，我们会从<code>storage</code>中拿数据，同时<code>vuex</code>中的状态是和<code>storage</code>中的一致。</p>
<h2 id="VUE封装一个按钮组件"><a href="#VUE封装一个按钮组件" class="headerlink" title="VUE封装一个按钮组件"></a>VUE封装一个按钮组件</h2><p>场景：<code>VUE</code>封装一个按钮组件</p>
<p>解决：点击事件的处理以及样式文案的修改</p>
<p>详情：<code>index.vue | App.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当点击按钮时，会向外派发一个click事件</span></span><br><span class="line"><span class="comment">//当父组件传递type时，根据type匹配对应class</span></span><br><span class="line">&lt;button :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;type&quot;</span> @click=<span class="string">&quot;handleClick&quot;</span>&gt;</span><br><span class="line">  <span class="xml">&lt;--</span></span><br><span class="line"><span class="xml">  	在App.vue中使用这个button组件时，slot会将button标签的内容区域的内容给获取到</span></span><br><span class="line"><span class="xml">  --&gt;</span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">props:&#123;</span><br><span class="line">  <span class="comment">//接收父组件type</span></span><br><span class="line">	<span class="attr">type</span>:<span class="built_in">String</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">	<span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  	<span class="comment">//向外派发一个事件&#x27;click&#x27;</span></span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="comment">//根据props接收的type来匹配对应的class</span></span><br><span class="line">  .primary&#123;</span><br><span class="line">    background-color: blue; </span><br><span class="line">  &#125;</span><br><span class="line">	...</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//监听按钮的点击事件</span><br><span class="line">//index.vue中button组件的slot会获取到内容并展示在页面上</span><br><span class="line"><span class="tag">&lt;<span class="name">my-buttton</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">my-button</span>&gt;</span></span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<p>原理：按钮组件使用<code>$emit</code>来监听父组件<code>click</code>事件，按钮可以用slot来获取父组件在标签内写的内容，按钮的样式可以通过组件定义父组件传值类型，写好样式类，当父组件使用到<code>props</code>传递类型时，动态赋值对应的<code>class</code>类名来改变按钮的样式。</p>
<h2 id="VUE使用mixin抽离公共组件逻辑"><a href="#VUE使用mixin抽离公共组件逻辑" class="headerlink" title="VUE使用mixin抽离公共组件逻辑"></a>VUE使用mixin抽离公共组件逻辑</h2><p>场景：父组件<code>App.vue</code> | 子组件<code>CompA.vue &amp; CompB.vue</code>；每个子组件又自有方法和公共方法，以及<code>mounted</code>钩子函数</p>
<p>解决：在组件<code>components</code>文件夹内创建<code>mixin.js</code></p>
<p>详情： <code>App.vue | CompA.vue | CompB.vue | mixin.js</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comp-a</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comp-b</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;comp-a&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; aData &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; commonData &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;aMethod&quot;</span>&gt;</span>aMethod<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;commonMethod&quot;</span>&gt;</span>commonMethod<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">import mixin from &#x27;./mixin&#x27;;</span><br><span class="line"></span><br><span class="line">mixins:[imxin],</span><br><span class="line">data()&#123;</span><br><span class="line">	return&#123;</span><br><span class="line">		aData:&#x27;组件A的数据&#x27;,</span><br><span class="line">		//commonData:&#x27;公共数据&#x27;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">	aMethod()&#123;</span><br><span class="line">		console.log(&#x27;组件A的方法&#x27;)</span><br><span class="line">	&#125;,</span><br><span class="line">	//commonMethod()&#123;</span><br><span class="line">		//console.log(&#x27;公共方法&#x27;)</span><br><span class="line">	//&#125;,</span><br><span class="line">&#125;</span><br><span class="line">mounted()&#123;</span><br><span class="line">	console.log(&#x27;组件A的mounted&#x27;)</span><br><span class="line">	//console.log(&#x27;common mounted&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">//提取公共的东西：commonData、commonMethod()、mounted()--console.log(&#x27;common mounted&#x27;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;comp-b&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; bData &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; commonData &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;bMethod&quot;</span>&gt;</span>bMethod<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;commonMethod&quot;</span>&gt;</span>commonMethod<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import mixin from &#x27;./mixin&#x27;;</span><br><span class="line"></span><br><span class="line">mixins:[imxin],</span><br><span class="line">data()&#123;</span><br><span class="line">	return&#123;</span><br><span class="line">		aData:&#x27;组件B的数据&#x27;,</span><br><span class="line">		//commonData:&#x27;公共数据&#x27;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">	aMethod()&#123;</span><br><span class="line">		console.log(&#x27;组件B的方法&#x27;)</span><br><span class="line">	&#125;,</span><br><span class="line">	//commonMethod()&#123;</span><br><span class="line">		//console.log(&#x27;公共方法&#x27;)</span><br><span class="line">	//&#125;</span><br><span class="line">&#125;</span><br><span class="line">mounted()&#123;</span><br><span class="line">	console.log(&#x27;组件A的mounted&#x27;)</span><br><span class="line">	//console.log(&#x27;common mounted&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">//提取公共的东西：commonData、commonMethod()、mounted()--console.log(&#x27;common mounted&#x27;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//commonData、commonMethod()、mounted()--console.log(&#x27;common mounted&#x27;)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">	data ()&#123;</span><br><span class="line">		<span class="keyword">return</span>&#123;</span><br><span class="line">    	<span class="attr">aData</span>:<span class="string">&#x27;组件A的数据&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">	&#125;,</span><br><span class="line">  <span class="attr">methods</span>:&#123;</span><br><span class="line">		<span class="function"><span class="title">commonMethod</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&#x27;公共方法&#x27;</span>)</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;common mounted&#x27;</span>)</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原理：两个子组件内都有公共的部分，我们将它提取到一个<code>mixin.js</code>中，在子组件中引入<code>mixin.js</code>文件，在子组件中定义<code>mixins</code>是个数组形式，里边填上我们引入的<code>mixin</code>文件就可以了（也就是可以定义多个<code>mixin</code>）。</p>
<h2 id="VUE使用keep-alive实现组件缓存"><a href="#VUE使用keep-alive实现组件缓存" class="headerlink" title="VUE使用keep-alive实现组件缓存"></a>VUE使用keep-alive实现组件缓存</h2><p>场景：父组件<code>App.vue</code> | 子组件<code>CompA.vue &amp; CompB.vue &amp; CompC.vue</code>；每个子组件又自有方法和公共方法，以及<code>mounted</code>钩子函数</p>
<p>解决：</p>
<p>详情：<code>App.vue | CompA.vue | CompB.vue | CompC.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;state = &#x27;A&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;state = &#x27;B&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;state = &#x27;C&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  //keep-alive包裹的内容，就是要缓存的内容不会触发 销毁 钩子，而且仅有首次渲染才会触发 挂载 钩子。</span><br><span class="line">  <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">comp-a</span> <span class="attr">v-if</span>=<span class="string">&quot;state === A&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-a</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">comp-b</span> <span class="attr">v-if</span>=<span class="string">&quot;state === B&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-b</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">comp-c</span> <span class="attr">v-if</span>=<span class="string">&quot;state === C&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-c</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  //如果组件的内容比较少，条件渲染可以改为 v-show 这样的效果与keep-alive效果基本一致，但是会一次渲染多个组件。v-show就是不符合渲染条件的会加上display:none;属性。</span><br><span class="line">  <span class="tag">&lt;<span class="name">comp-a</span> <span class="attr">v-show</span>=<span class="string">&quot;state === A&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-a</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">comp-b</span> <span class="attr">v-show</span>=<span class="string">&quot;state === B&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-b</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">comp-c</span> <span class="attr">v-show</span>=<span class="string">&quot;state === C&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-c</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">data()&#123;</span><br><span class="line">	return&#123;</span><br><span class="line">		state:&#x27;A&#x27;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	组件A</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">mounted()&#123;</span><br><span class="line">	console.log(&#x27;组件渲染&#x27;)</span><br><span class="line">&#125;,</span><br><span class="line">destoryed()&#123;</span><br><span class="line">	console.log(&#x27;组件销毁&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	组件B</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">mounted()&#123;</span><br><span class="line">	console.log(&#x27;组件渲染&#x27;)</span><br><span class="line">&#125;,</span><br><span class="line">destoryed()&#123;</span><br><span class="line">	console.log(&#x27;组件销毁&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	组件C</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">mounted()&#123;</span><br><span class="line">	console.log(&#x27;组件渲染&#x27;)</span><br><span class="line">&#125;,</span><br><span class="line">destoryed()&#123;</span><br><span class="line">	console.log(&#x27;组件销毁&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原理：<code>keep-alive</code>包裹的内容，就是要缓存的内容不会触发 <code>销毁</code> 钩子，而且仅有首次渲染才会触发 <code>挂载</code> 钩子。</p>
<h2 id="VUE：watch属性"><a href="#VUE：watch属性" class="headerlink" title="VUE：watch属性"></a>VUE：watch属性</h2><p>场景：使用<code>watch</code>来监听值的变化</p>
<p>解决：<code>watch</code></p>
<p>详情：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;info.hobby&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;info&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">return&#123;</span><br><span class="line">	name:&#x27;小明&#x27;,</span><br><span class="line">	info:&#123;</span><br><span class="line">		hobby:&#x27;code&#x27;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">watch:&#123;</span><br><span class="line">	name(newValue,oldValue)&#123;</span><br><span class="line">		console.log(&#x27;name&#x27;,newValue,oldValue);</span><br><span class="line">	&#125;,</span><br><span class="line">	</span><br><span class="line">	//info(newValue,oldValue)&#123;</span><br><span class="line">	  //console.log(&#x27;info&#x27;,newValue,oldValue)</span><br><span class="line">	//&#125;</span><br><span class="line">	</span><br><span class="line">	//如果要监听的是一个对象，原来的监听方式就需要写成：</span><br><span class="line">	info:&#123;</span><br><span class="line">		handler: function(newValue,oldValue)&#123;</span><br><span class="line">			console.log(&#x27;info&#x27;,newValue,oldValue)</span><br><span class="line">		&#125;,</span><br><span class="line">		//对象需要深监听，监听到对象属性</span><br><span class="line">		deep:true</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原理：<code>watch</code>是<code>vue</code>提供的侦听器属性，他可以监听<code>data</code>的数据变化，基本类型可以用正常的函数写法去监听，但是如果是对象的话，必须使用<code>handler</code>属性创建函数来监听，并且还要在<code>handler</code>下加上<code>deep:true</code>才可以完成监听，但是引用类型的值没有改变前和改变后两个概念，因为他们的引用地址都是相同的，一旦更改同一地址就不能获取老值了，只能通过拷贝来保存老值再去和新值做对比。</p>
<h2 id="VUE：computed属性"><a href="#VUE：computed属性" class="headerlink" title="VUE：computed属性"></a>VUE：computed属性</h2><p>场景：<code>computed</code></p>
<p>解决：</p>
<p>详情：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;number&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>double:&#123;&#123;double&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;double2&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">return&#123;</span><br><span class="line">	number:5</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">computed:&#123;</span><br><span class="line">	//计算属性的函数可以写为: get()\set()</span><br><span class="line">	double1()&#123;</span><br><span class="line">		return this.number * 2</span><br><span class="line">	&#125;,</span><br><span class="line">	</span><br><span class="line">	double1:&#123;</span><br><span class="line">		get()&#123;</span><br><span class="line">		  return this.number * 2</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	//因为我们的this.number可以通过输入框去获取和改变值，所以我们需要写get()\set()才能让计算属性有完整的执行</span><br><span class="line">	double2:&#123;</span><br><span class="line">		get()&#123;</span><br><span class="line">			return this.number * 2</span><br><span class="line">		&#125;,</span><br><span class="line">		set(value)&#123;</span><br><span class="line">			this.number = value / 2</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原理：computed只有当依赖的属性发生变化才会重新计算，当我们的值通过input动态绑定时，我们所依赖的值，就需要用get、set来维持基本的效果，否则，随意更改依赖值会发生报错行为。</p>
<h2 id="VUE：router-link-的-tag属性"><a href="#VUE：router-link-的-tag属性" class="headerlink" title="VUE：router-link 的 tag属性"></a>VUE：router-link 的 tag属性</h2><p>场景：</p>
<p>解决：</p>
<p>详情：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span> <span class="attr">tag</span>=<span class="string">&quot;button&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>原理：编译时，tag的值就是最后编译完成的元素，button li span div。。。。</p>
<h2 id="VUE：动态绑定class实现动态switch"><a href="#VUE：动态绑定class实现动态switch" class="headerlink" title="VUE：动态绑定class实现动态switch"></a>VUE：动态绑定class实现动态switch</h2><p>场景：</p>
<p>解决：动态绑定<code>class</code></p>
<p>详情：父组件<code>home.vue</code>，子组件<code>hellloworld.vue</code></p>
<p><code>home.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 向子组件传递switch的内容 和 当前记录的被选中的选项 @switchChange负责接收子组件点击项的index</span><br><span class="line"><span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">:switchs</span>=<span class="string">&quot;switchs&quot;</span> <span class="attr">:curret</span>=<span class="string">&quot;curret&quot;</span> @<span class="attr">switchChange</span>=<span class="string">&quot;switchChange&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data()&#123;</span><br><span class="line">  return&#123;</span><br><span class="line">  // 记录选中项下标 默认是选项一</span><br><span class="line">    curret:0,</span><br><span class="line">  	// switch的内容</span><br><span class="line">    switchs:[</span><br><span class="line">      &#123;</span><br><span class="line">        title:&#x27;选项一&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        title:&#x27;选项二&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">	// 接收子组件点击项的index</span><br><span class="line">  switchChange(i)&#123;</span><br><span class="line">    this.curret = i</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>helloworld.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// switch</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swit&quot;</span>&gt;</span></span><br><span class="line">	// 循环父组件传过来的switch数组 change是触发emit向父组件传递当前被点击的项的index :class动态给被点击的项添加active类</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;(v,i) in switchs&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;change(i)&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:curret===i&#125;&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;switchs[i].title&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">// 根据父组件的curret来判断该展示哪部分的内容</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;curret==0&quot;</span>&gt;</span>选项一的内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;curret==1&quot;</span>&gt;</span>选项二的内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// switchs：选项卡的内容 curret：被选中的下标</span><br><span class="line">props:[&#x27;switchs&#x27;,&#x27;curret&#x27;],</span><br><span class="line"> </span><br><span class="line">methods:&#123;</span><br><span class="line">	// 点击事件触发emit给父组件传递对应被点击的index</span><br><span class="line">  change(i)&#123;</span><br><span class="line">    this.$emit(&#x27;switchChange&#x27;,i)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原理：用户点击子组件的<code>switch</code>后，相对应的按钮的<code>index</code>会被传入父组件，父组件接收到后赋值给<code>curret</code>，再将<code>curret</code>的值传递给子组件，子组件拿到<code>curret</code>之后会判断<code>switchs</code>的<code>item</code>的<code>index</code>是否等于传过来的<code>curret</code>，如果等于，那就是给点击的项动态赋值一个<code>active</code>类。</p>
<h2 id="VUE：列表的动画效果"><a href="#VUE：列表的动画效果" class="headerlink" title="VUE：列表的动画效果"></a>VUE：列表的动画效果</h2><p>场景：</p>
<p>解决：<code>&lt;transition-group tag=&quot;ul&quot; name=&quot;list&quot;&gt;动画列表&lt;/transition-group&gt;</code></p>
<p>详情：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition-group</span> <span class="attr">tag</span>=<span class="string">&quot;ul&quot;</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br><span class="line">// 这个组件会生成几个类名，用类名来设置过渡以及动画效果 .list-enter-active , .list-enter-active</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  </span></span><br><span class="line"><span class="css">// 定义<span class="selector-tag">li</span>的高度为<span class="number">40px</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">  </span></span><br><span class="line"><span class="css">// 动画的监听变化</span></span><br><span class="line"><span class="css"><span class="selector-class">.list-enter-active</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.list-leave-active</span>&#123;</span></span><br><span class="line"><span class="css">  // 监听高度，当高度发生变化时，使这个变化的时长为<span class="number">0.1s</span>,运动轨迹是linear</span></span><br><span class="line"><span class="css">   <span class="attribute">transition</span>: height <span class="number">0.1s</span> linear;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">  </span></span><br><span class="line"><span class="css">// 当元素新增时，列表的高度由<span class="number">0</span>变为<span class="number">40</span>，</span></span><br><span class="line"><span class="css">// 当元素删除时，列表的高度由<span class="number">40</span>变为<span class="number">0</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.list-enter</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.list-leave-to</span>&#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">height</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">  </span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>原理：transition-group组件内的元素，负责监听变化的几个类名是.list-enter-active和.list-leave-active，他们负责在监听到对应样式变化时执行指定的动画效果以及过渡时长；.list-enter和.list-leave-to负责执行动画，这里当删除和新增列表项的时候，增加：列表项的高度由0到40，在0.1s内逐渐增加，删除：列表项的高度由40到0，在0.1s内逐渐消失。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/01/VUE/" data-id="ckqkp4adb0002dwux1jg4863w" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-自学electron入门搭建" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/01/%E8%87%AA%E5%AD%A6electron%E5%85%A5%E9%97%A8%E6%90%AD%E5%BB%BA/" class="article-date">
  <time class="dt-published" datetime="2021-07-01T06:55:41.196Z" itemprop="datePublished">2021-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="生成Electron桌面级应用程序"><a href="#生成Electron桌面级应用程序" class="headerlink" title="生成Electron桌面级应用程序"></a>生成Electron桌面级应用程序</h2><p>创建项目：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//配置yarn：https://blog.csdn.net/yw00yw/article/details/81354533</span><br><span class="line">$ npm install -g yarn</span><br><span class="line">查看版本：$ yarn --version</span><br><span class="line"></span><br><span class="line">//创建项目/启动项目：https://www.electronforge.io/</span><br><span class="line">$ yarn create electron-app my-app</span><br><span class="line">$ cd my-app</span><br><span class="line">$ yarn start</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>启动项目：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn start</span><br></pre></td></tr></table></figure>

<p>打包成桌面应用程序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ yarn make</span><br><span class="line"></span><br><span class="line">//命令执行完毕会生成out文件夹，打开里边有make和一个由项目名加windows环境的这么一个文件夹（my-app-win32-x64）我们可以打开my-app-win32-x64里边有一个.exe结尾的文件，打开即可运行。</span><br></pre></td></tr></table></figure>

<h2 id="如何接入Node？"><a href="#如何接入Node？" class="headerlink" title="如何接入Node？"></a>如何接入Node？</h2><p><code>index.js（主进程）</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// Create the browser window.</span></span><br><span class="line">  <span class="keyword">const</span> mainWindow = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">    <span class="comment">//正式接入node</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//需要同时设置：nodeIntegration:true 和 contextIsolation:false</span></span><br></pre></td></tr></table></figure>

<p>测试：运行项目，项目目录内会新增一个input.txt</p>
<p><code>index.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>我的第一个桌面应用程序<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;index.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>张景元<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Welcome to 张景元&#x27;s Electron APP.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>点击创建文件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/render.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>render.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// fs.writeFile(&#x27;input.txt&#x27;,&#x27;将hello world写入到input.txt&#x27;,(err)=&gt;&#123;</span></span><br><span class="line"><span class="comment">//   if(err) throw err;</span></span><br><span class="line"><span class="comment">//   console.log(&#x27;写入完毕&#x27;);</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  i++;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">11111</span>);</span><br><span class="line">  fs.writeFile(<span class="string">`input<span class="subst">$&#123;i&#125;</span>.txt`</span>,<span class="string">&#x27;将hello world写入到input.txt&#x27;</span>,<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;写入完毕&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="拖入文件获取文件路径"><a href="#拖入文件获取文件路径" class="headerlink" title="拖入文件获取文件路径"></a>拖入文件获取文件路径</h2><p><code>index.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>我的第一个桌面应用程序<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;index.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;pre-files&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>将你的文件拖动到此处<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;read-list&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>获取文件内容<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/render.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>render.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> holder = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;pre-files&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> readList = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;read-list&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">holder.addEventListener(<span class="string">&#x27;drop&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">  e.preventDefault();<span class="comment">//阻止默认事件</span></span><br><span class="line">  e.stopPropagation();<span class="comment">//阻止冒泡</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">const</span> file <span class="keyword">of</span> e.dataTransfer.files)&#123;</span><br><span class="line">    <span class="comment">//打印文件对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(file);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`文件路径：<span class="subst">$&#123;file.path&#125;</span>`</span>);</span><br><span class="line">    <span class="comment">//读取文件内容</span></span><br><span class="line">    fs.readFile(file.path,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">      <span class="comment">//读取数据并且写入列表</span></span><br><span class="line">      <span class="keyword">let</span> newDiv = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">      newDiv.className = <span class="string">&#x27;readFile&#x27;</span>;</span><br><span class="line">      newDiv.innerHTML = <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;h3&gt;<span class="subst">$&#123;file.name&#125;</span>&lt;/h3&gt;</span></span><br><span class="line"><span class="string">        &lt;pre&gt;<span class="subst">$&#123;data&#125;</span>&lt;/pre&gt;</span></span><br><span class="line"><span class="string">      `</span></span><br><span class="line">      readList.appendChild(newDiv)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">holder.addEventListener(<span class="string">&#x27;dragover&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">  e.preventDefault();<span class="comment">//阻止默认事件</span></span><br><span class="line">  e.stopPropagation();<span class="comment">//阻止冒泡</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>index.css</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="string">&quot;Segoe UI&quot;</span>, Roboto, Helvetica, Arial, sans-serif;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">38rem</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#pre-files</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000000</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">5px</span> solid red;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.pre-files</span> <span class="selector-tag">h1</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createWindow = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> mainWindow = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">    <span class="attr">webPreferences</span>:&#123;</span><br><span class="line">      <span class="attr">nodeIntegration</span>:<span class="literal">true</span>,</span><br><span class="line">      <span class="attr">contextIsolation</span>:<span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="在应用中建立新的页面-webview"><a href="#在应用中建立新的页面-webview" class="headerlink" title="在应用中建立新的页面  webview"></a>在应用中建立新的页面  <code>webview</code></h2><p><a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/api/webview-tag#webview-tag">https://www.electronjs.org/docs/api/webview-tag#webview-tag</a></p>
<p>目标1：在<code>index.html</code>中，使用<code>webview</code>打开百度首页，并插入<code>css</code>修改搜索按钮样式—–<code>insertCSS</code></p>
<p><a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/api/webview-tag#webviewinsertcsscss">https://www.electronjs.org/docs/api/webview-tag#webviewinsertcsscss</a></p>
<p><code>render.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webview = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;wv&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//当webview开始加载时会触发：did-start-loading 这个事件</span></span><br><span class="line">webview.addEventListener(<span class="string">&#x27;did-start-loading&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;正在加载。。。。。&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//当webview加载完毕是=时会触发：did-stop-loading 这个事件</span></span><br><span class="line">webview.addEventListener(<span class="string">&#x27;did-stop-loading&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;加载完毕。。。。。&#x27;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log([webview]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//将百度首页的搜索按钮改为绿色</span></span><br><span class="line">  webview.insertCSS(<span class="string">`#su&#123;background:green !important;&#125;`</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>index.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>我的第一个桌面应用程序<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;index.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">webview</span> <span class="attr">id</span>=<span class="string">&quot;wv&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://www.baidu.com&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 640px; height:480px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">webview</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/render.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>目标2：在<code>index.html</code>中，使用<code>webview</code>打开百度首页，并插入<code>js</code>自动填充内容并搜索—–<code>executeJavaScript()</code></p>
<p><a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/api/webview-tag#webviewexecutejavascriptcode-usergesture">https://www.electronjs.org/docs/api/webview-tag#webviewexecutejavascriptcode-usergesture</a></p>
<p><code>render.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webview = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;wv&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//当webview开始加载时会触发：did-start-loading 这个事件</span></span><br><span class="line">webview.addEventListener(<span class="string">&#x27;did-start-loading&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;正在加载。。。。。&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//当webview加载完毕是=时会触发：did-stop-loading 这个事件</span></span><br><span class="line">webview.addEventListener(<span class="string">&#x27;did-stop-loading&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;加载完毕。。。。。&#x27;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log([webview]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//将百度首页的搜索按钮改为绿色，先在百度首页查到对应css</span></span><br><span class="line">  webview.insertCSS(<span class="string">`#su&#123;background:green !important;&#125;`</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//让百度首页的搜索框自动填写关键词并延迟2秒后加载 先找到输入框</span></span><br><span class="line">  webview.executeJavaScript(<span class="string">`</span></span><br><span class="line"><span class="string">    //让webview延时加载</span></span><br><span class="line"><span class="string">    setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="string">      let input = document.querySelector(&#x27;#kw&#x27;)</span></span><br><span class="line"><span class="string">      let btn = document.querySelector(&#x27;#su&#x27;)</span></span><br><span class="line"><span class="string">      input.value = &#x27;张景元&#x27;;</span></span><br><span class="line"><span class="string">      btn.click()</span></span><br><span class="line"><span class="string">    &#125;, 2000);</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="使应用打开一个新的窗口"><a href="#使应用打开一个新的窗口" class="headerlink" title="使应用打开一个新的窗口"></a>使应用打开一个新的窗口</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn create electron-app demo 生成一个新窗口项目叫demo</span><br></pre></td></tr></table></figure>

<p>在<code>electron-app</code>下的<code>index.js</code></p>
<p><a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/api/ipc-main#ipcmain">https://www.electronjs.org/docs/api/ipc-main#ipcmain</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入通讯模块 ipcMain</span></span><br><span class="line"><span class="keyword">const</span> &#123; app, BrowserWindow, ipcMain &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听渲染进程发送过来的zjy-message事件</span></span><br><span class="line">ipcMain.on(<span class="string">&#x27;zjy-message&#x27;</span>,<span class="function">(<span class="params">event,arg</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">//主程序的答复或响应</span></span><br><span class="line">  event.reply(<span class="string">&#x27;zjy-replay&#x27;</span>,<span class="string">&#x27;这是主进程的答复&#x27;</span>)</span><br><span class="line">  <span class="comment">//arg是发送过来的参数</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;发送过来的参数：&#x27;</span>+ arg);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在<code>demo</code>下的<code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入通讯模块 ipcMain</span></span><br><span class="line"><span class="keyword">const</span> &#123; app, BrowserWindow, ipcMain &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听渲染进程发送过来的zjy-message事件</span></span><br><span class="line">ipcMain.on(<span class="string">&#x27;zjy-message&#x27;</span>,<span class="function">(<span class="params">event,arg</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">//主程序的答复或响应</span></span><br><span class="line">  event.reply(<span class="string">&#x27;zjy-replay&#x27;</span>,<span class="string">&#x27;这是主进程的答复&#x27;</span>)</span><br><span class="line">  <span class="comment">//arg是发送过来的参数</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;发送过来的参数：&#x27;</span>+ arg);</span><br><span class="line">&#125;)	</span><br><span class="line"></span><br><span class="line"><span class="comment">//发消息给渲染进程</span></span><br><span class="line">mainWindow.webContents.send(<span class="string">&#x27;zjy-active&#x27;</span>,<span class="string">&#x27;创建窗口之后，主进程主动发消息给渲染进程&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>未完待续——-更新时间：2021年7月1日14:58:21</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/01/%E8%87%AA%E5%AD%A6electron%E5%85%A5%E9%97%A8%E6%90%AD%E5%BB%BA/" data-id="ckqkp4ad90001dwux7geid0c8" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/01/hello-world/" class="article-date">
  <time class="dt-published" datetime="2021-07-01T06:47:52.315Z" itemprop="datePublished">2021-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/01/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/01/hello-world/" data-id="ckqkp4ad40000dwux4t97ef13" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/01/VUE/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/07/01/%E8%87%AA%E5%AD%A6electron%E5%85%A5%E9%97%A8%E6%90%AD%E5%BB%BA/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/07/01/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>